"use strict";var username=prompt("Enter your username:"),ably=new Ably.Realtime("knH84g.xyERFQ:_YgFb-hkCXQNM2gCyRhIt2Q0NWuKd2JmfNhLZILR7DE"),channel=ably.channels.get("chat-room"),users=[],messages=[],messageInput=document.getElementById("message-input"),sendButton=document.getElementById("send-button"),chatMessages=document.getElementById("chat-messages"),userList=document.getElementById("user-list"),userStatus=document.getElementById("user-status"),userSelect=document.getElementById("user-select");function sendMessage(){var e=messageInput.value.trim();""!==e&&(channel.publish("message",{user:username,text:e,time:(new Date).toLocaleTimeString()}),messageInput.value="")}function updateUserList(){userList.innerHTML="",users.forEach(function(e){var t=document.createElement("li");t.textContent=e,userList.appendChild(t)})}function updateUserStatus(e,t){"join"===e?userStatus.textContent="".concat(t," has joined the chat."):"leave"===e&&(userStatus.textContent="".concat(t," has left the chat."))}function initializeUser(){channel.publish("user-action",{action:"join",username:username}),users.push(username),updateUserList()}channel.subscribe("message",function(e){var t=document.createElement("div");t.innerHTML="<strong>".concat(e.data.user,"</strong> [").concat(e.data.time,"]: ").concat(e.data.text),chatMessages.appendChild(t),chatMessages.scrollTop=chatMessages.scrollHeight}),channel.subscribe("user-action",function(t){"join"===t.data.action?users.push(t.data.username):"leave"===t.data.action&&(users=users.filter(function(e){return e!==t.data.username})),updateUserList(),updateUserStatus(t.data.action,t.data.username)}),userSelect.addEventListener("change",function(){var e=userSelect.value;e&&channel.publish("private-message",{to:e,from:username,text:"Private message initiated"})}),initializeUser(),sendButton.addEventListener("click",sendMessage),messageInput.addEventListener("keypress",function(e){"Enter"===e.key&&sendMessage()});
//# sourceMappingURL=script.min.js.map
